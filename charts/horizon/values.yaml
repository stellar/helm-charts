global:
  ## String to use to explicitly set namespace name in manifests.
  ## Useful for those using "helm template" to render templates
  # namespace: mynamespace

  ## Stellar network to use. Supported values are "testnet", "pubnet" and "custom"
  ## When "custom" is used you have to provide extra settings:
  ##   - global.historyArchiveUrls
  ##   - global.networkPassphrase
  ##   - ingest.coreConfig
  network: testnet

  ## Required when global.network is set to "custom"
  # historyArchiveUrls: "url1,url2,url3"
  # networkPassphrase: "My Stellar Network; June 2020"

  ## String to partially override common.fullname template (will maintain the release name)
  ##
  # nameOverride:

  ## String to fully override common.fullname template
  ##
  # fullnameOverride:

  ## List of pre-existing image Pull Secrets to use
  # imagePullSecrets:
  # - imagepullsecret1
  # - imagepullsecret2

  image:
    horizon:
      registry: docker.io
      repository: stellar/stellar-horizon
      ## Optional tag. Defaults to the appVersion from Chart.yaml
      # tag: 1.2.3

      ## Specify a imagePullPolicy
      ## Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'
      ## ref: http://kubernetes.io/docs/user-guide/images/#pre-pulling-images
      ##
      pullPolicy: Always
    coreExporter:
      registry: docker.io
      repository: stellar/stellar-core-prometheus-exporter
      tag: latest
      ## Specify a imagePullPolicy
      ## Defaults to 'Always' if image tag is 'latest', else set to 'IfNotPresent'
      ## ref: http://kubernetes.io/docs/user-guide/images/#pre-pulling-images
      ##
      pullPolicy: Always

ingest:
  ## See global.image.horizon for image settings

  ## Whether to deploy ingesting instances
  enabled: true

  ## List of CLI arguments to provide to the stellar-horizon binary
  cliArgs:
  - "--apply-migrations"

  ## This variable allows overrides of default settings
  horizonConfig:
    {}
    # port: 8001

  ## pre existing secret that contains the DATABASE_URL key with postgres URL
  existingSecret: ""

  ## Required when global.network is set to "custom"
  ## Also useful if you want to provide non-standard testnet or pubnet config
  # coreConfig:

  ## For production use cases we recommend at least 2 replicas
  replicaCount: 1

  ## Uncomment to use custom service account
  # serviceAccountName: default

  ## List of annotations to add to the StatefulSet
  # annotations:
  #   prometheus.io/scrape: "true"
  #   prometheus.io/port: "6000"

  persistence:
    enabled: false
    storageClass: default
    size: 100G

  ## Uncomment to set resource limits
  #resources:
  #  limits:
  #    cpu: 2
  #    memory: 4Gi
  #  requests:
  #    cpu: 250m
  #    memory: 2Gi

  coreExporter:
    ## Common prometheus config examples do not allow it to scrape 2 ports
    ## If you'd like to scrape both horizon and core metrics example
    ## workarounds can be found here:
    ##   https://github.com/prometheus/prometheus/issues/3756#issuecomment-362266296
    ##   https://github.com/prometheus/prometheus/issues/3756#issuecomment-874043080
    ## If you'd like to have prometheus
    enabled: true

    ## See global.image.coreExporter for image settings

    ## Uncomment to set resource limits
    #resources:
    #  limits:
    #    cpu: 250m
    #    memory: 512Mi
    #  requests:
    #    cpu: 50m
    #    memory: 128Mi

web:
  ## See global.image.horizon for image settings

  ## Whether to deploy non-ingesting instances
  ## Useful with read-only DB replica
  enabled: false

  ## List of CLI arguments to provide to the stellar-horizon binary
  # cliArgs: []

  ## This variable allows overrides of default settings
  horizonConfig:
    {}
    # port: 8001

  ## pre existing secret that contains the DATABASE_URL key with postgres URL
  existingSecret: ""

  ## For production use cases we recommend at least 2 replicas
  replicaCount: 1

  ## Uncomment to use custom service account
  # serviceAccountName: default

  ## List of annotations to add to the StatefulSet
  # annotations:
  #   prometheus.io/scrape: "true"
  #   prometheus.io/port: "6000"

  ## Uncomment to set resource limits
  #resources:
  #  limits:
  #    cpu: 2
  #    memory: 4Gi
  #  requests:
  #    cpu: 250m
  #    memory: 2Gi
